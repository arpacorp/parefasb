.\" Manpage for configure.
.\" Contact eric@arpa.ph to correct errors or typos.
.TH configure 1 "18 Jan 2021" "1.0" "configure man page"
.SH NAME
configure \- PAREF App Server Builder
.SH DESCRIPTION
PAREF App Server Builder is a script to automate the PAREF SMS server build process in the cloud. The script uses a configuration file located at /etc/parefconfigure/configure.conf which loads the parameters of the build process as environment variables. This makes the build process easier and faster, removing the necessity to make manual configurations which normally leads to a non-standardized configuration parameters that are prone to errors. Please take note that this script requires a custom Ubuntu_20.04_LTS image created for PAREF. This will handle everything from:

- Installation of packages.

- Enabling, disabling of modules.

- Custom configurations for GFS, crontab and MySQL server access.

- Firewall configurations. 

- Apache and PHP5.6 config customizations.

- TLS certificate installation and renewal from Let's Encrypt.

- Deployment and linking to the GFS filesystem. 

.SH OPTIONS
The script can be run by pulling the stable code released from the repository or by using the compiled script from a stable image (img.paref.edu.ph-stable-{VERSION_NO}) on your cloud provider.

Command as root:

wget https://github.com/arpacorp/parefasb/releases/download/{VERSION_NO}/parefasb.zip && unzip parefasb.zip && cd parefasb && chmod +x configure && /usr/bin/bash configure

or

/usr/local/bin/configure or /bin/configure or ~/parefasb/configure

The configuration option are as follows:

Dialog options:

1			- [P]repare the environment. When this option is chosen, all packages and corresponding modules needed for the deployment will be automatically installed. This option requires the BASE_PACKAGES parameters and will decide which packages and modules will be installed and enabled. 

2 			- [S]etup a new server. When this options is chosen, the script will setup the environment as a new server ready for deployment. This option will require a new, unused SERVERCODE (E.g. ph01, ph02, etc). The option will automatically deploy the new server in the Gluster File System /storage and will be ready for data transfer. 

3			- [L]ink an existing server. When this option is chosen, 

[MISC_SETTINGS].

EMAIL		- Defines the email address of the server administrator.

XIND 		- Defines the default index file for the web server.

XINF 		- Defines the default phpinfo for the server.

XHST 		- Defines the /etc/hosts file.

XFST 		- Defines the /etc/fstab entry.

BASEPATH		- Defines the base path /etc/parefconfigure.

APACHEDIR		- Defines the /etc/apache2 directory.

PHPDIR		- Defines the /etc/php/5.6/apache2 directory.

LOGFILE		- Defines the configure.log.

WEBROOT		- Defines the default DocumentRoot.

STORPUB		- Defines the /storage/public path.

STORCON		- Defines the /storage/config path.

TMPDIR		- Defines the /tmp file location.

[BASE_PACKAGES].

BASEPKGS_U	- Defines the Ubuntu packages separated by a pipe |.

DMODULE_U		- Defines the Apache modules to be disabled by default.

EMODULE_U		- Defines the Apache modules to be enabled.

BASEPKGS_C	- Defines the RHEL/CentOS packages separated by a pipe |.

[CUSTOM_CONFIG].

CUSTOM_ENV	- Defines the environment file env.txt.

CUSTOM_WELCOME	- Defines the welcome file for 000.txt.

CUSTOM_SERVERCODE		- Defines the server code file for 001.txt.

CUSTOM_SERVERNAME		- Defines the question file for 002.txt.

CUSTOM_HTTPSPORT		- Defines the question file for 003.txt.

CUSTOM_SERVERTOKENS 	- Defines the question file for 004.txt.

CUSTOM_SERVERSIGNATURE 	- Defines the question file for 005.txt.

CUSTOM_CERTBOT 		- Defines the question file for 006.txt.

CUSTOM_SECURITY		- Defines the question file for 007.txt.

CUSTOM_DISABLEHTTP		- Defines the question file for 008.txt.

CUSTOM_MAXUPLOADSIZE 	- Defines the question file for 009.txt.

CUSTOM_CONFIRM 		- Defines the question file for 010.txt.

.SH SEE ALSO
configure(1), configure.conf(2)
.SH BUGS
No known bugs. Hit us up at #supportchannel for issues, requests, problems, etc.
.SH AUTHOR
Eric Fajardo (eric@arpa.ph)
